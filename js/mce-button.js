/*
* @author Motopress
* @license GPLv2 or later
*/
!function(){tinymce.PluginManager.add("vrg_panel",function(e,t){e.addCommand("vrg_panel_popup",function(t,n){var i="";n.image&&(i=n.image);var o="100%";n.scene_width&&(o=n.scene_width);var a="70%";n.scene_height&&(a=n.scene_height);var r="#ffffff";n.sky_color&&(r=n.sky_color);var d="";n.ground_texture&&(d=n.ground_texture),e.windowManager.open({title:"VR Gallery Shortcode",body:[{type:"textbox",name:"image",label:"Gallery Images Id",value:i,id:"vrg-image-box",tooltip:"Product image"},{type:"button",name:"select_images",id:"vrg-select-images",text:"Select Images",onclick:function(){window.mb=window.mb||{},window.mb.frame=wp.media({frame:"post",state:"insert",library:{type:"image"},multiple:!0}),window.mb.frame.on("insert",function(){var e=window.mb.frame.state().get("selection").toJSON();if(!(0>jQuery.trim(e.length))){var t=new Array;jQuery.each(e,function(n,i){t+=i.id,n!==e.length-1&&(t+=",")}),jQuery("#vrg-image-box").val(t)}}),window.mb.frame.open()}},{type:"textbox",name:"scene_width",label:"Scene width",value:o,id:"vrg-scene-width",tooltip:"Set scene width (%, px)"},{type:"textbox",name:"scene_height",label:"Scene height",value:a,id:"vrg-scene-height",tooltip:"Set scene height (%, px)"},{type:"colorpicker",name:"sky_color",label:"Sky color",value:r,id:"vrg-sky-color",tooltip:"Set sky (sphere) color"},{type:"textbox",name:"ground_texture",label:"Ground texture",value:d,id:"vrg-ground-texture",tooltip:"Ground texture"},{type:"button",name:"ground_texture_select",id:"vrg-ground-select",text:"Select Ground texture",onclick:function(){window.mb=window.mb||{},window.mb.frame=wp.media({frame:"post",state:"insert",library:{type:"image"},multiple:!1}),window.mb.frame.on("insert",function(){var e=window.mb.frame.state().get("selection").first().toJSON();console.log(e),0>jQuery.trim(e.length)||jQuery("#vrg-ground-texture").val(e.id)}),window.mb.frame.open()}}],onsubmit:function(t){var n="[vrg_panel";
//check for images
void 0!==t.data.image&&t.data.image.length&&(n+=' image_ids="'+t.data.image+'"'),void 0!==t.data.scene_width&&t.data.scene_width.length&&(n+=' scene_width="'+t.data.scene_width+'"'),void 0!==t.data.scene_height&&t.data.scene_height.length&&(n+=' scene_height="'+t.data.scene_height+'"'),void 0!==t.data.sky_color&&t.data.sky_color.length&&(n+=' sky_color="'+t.data.sky_color+'"'),void 0!==t.data.ground_texture&&t.data.ground_texture.length&&(n+=' ground_texture="'+t.data.ground_texture+'"'),n+="]",e.insertContent(n)}})}),e.addButton("vrg_panel",{icon:"vrg_panel",tooltip:"VR Gallery",onclick:function(){e.execCommand("vrg_panel_popup","",{image:""})}})})}();